
Using a simple lock for thread safety cost
almost nothing for non-threaded runs.